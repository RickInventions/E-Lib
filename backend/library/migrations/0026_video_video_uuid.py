# Generated by Django 5.2.3 on 2025-06-18 18:39

import library.models
from django.db import migrations, models
import uuid

def generate_unique_video_uuids(apps, schema_editor):
    Video = apps.get_model('library', 'Video')
    for video in Video.objects.all():
        video.video_uuid = f"VIDEO-{uuid.uuid4().hex[:8].upper()}"
        video.save()

class Migration(migrations.Migration):

    dependencies = [
        # ... your dependencies ...
        ('library', '0025_video_instructor'),
    ]

    operations = [
        migrations.AddField(
            model_name='video',
            name='video_uuid',
            field=models.CharField(max_length=32, unique=True, null=True),
        ),
        migrations.RunPython(generate_unique_video_uuids),
        migrations.AlterField(
            model_name='video',
            name='video_uuid',
            field=models.CharField(max_length=32, unique=True, null=False),
        ),
    ]